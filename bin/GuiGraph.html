<!DOCTYPE html>
	<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>GUI</title>
	</head>

	<body>
	<h1>1 BFS TREE:</h1>
	<svg width="5000" height="2000">
	<line x1="760" y1="140" x2="220" y2="260" id="21_11" style="stroke:black;stroke-width:1"/>
	<line x1="940" y1="20" x2="760" y2="140" id="71_21" style="stroke:black;stroke-width:1"/>
	<line x1="760" y1="140" x2="850" y2="260" id="21_31" style="stroke:black;stroke-width:1"/>
	<line x1="220" y1="260" x2="130" y2="380" id="11_41" style="stroke:black;stroke-width:1"/>
	<line x1="220" y1="260" x2="490" y2="380" id="11_51" style="stroke:black;stroke-width:1"/>
	<line x1="940" y1="20" x2="1300" y2="140" id="71_61" style="stroke:black;stroke-width:1"/>
	<line x1="940" y1="20" x2="1750" y2="140" id="71_81" style="stroke:black;stroke-width:1"/>
	<line x1="130" y1="380" x2="40" y2="500" id="41_91" style="stroke:black;stroke-width:1"/>
	<line x1="490" y1="380" x2="400" y2="500" id="51_101" style="stroke:black;stroke-width:1"/>
	<line x1="490" y1="380" x2="670" y2="500" id="51_111" style="stroke:black;stroke-width:1"/>
	<line x1="1300" y1="140" x2="1210" y2="260" id="61_121" style="stroke:black;stroke-width:1"/>
	<line x1="1300" y1="140" x2="1480" y2="260" id="61_131" style="stroke:black;stroke-width:1"/>
	<line x1="940" y1="20" x2="2200" y2="140" id="71_141" style="stroke:black;stroke-width:1"/>
	<line x1="1750" y1="140" x2="1660" y2="260" id="81_151" style="stroke:black;stroke-width:1"/>
	<line x1="1750" y1="140" x2="2020" y2="260" id="81_161" style="stroke:black;stroke-width:1"/>
	<line x1="2020" y1="260" x2="1930" y2="380" id="161_171" style="stroke:black;stroke-width:1"/>
	<line x1="1930" y1="380" x2="1840" y2="500" id="171_181" style="stroke:black;stroke-width:1"/>
	<line x1="400" y1="500" x2="310" y2="620" id="101_191" style="stroke:black;stroke-width:1"/>
	<line x1="670" y1="500" x2="580" y2="620" id="111_201" style="stroke:black;stroke-width:1"/>
	<line x1="1120" y1="380" x2="1030" y2="500" id="221_211" style="stroke:black;stroke-width:1"/>
	<line x1="1210" y1="260" x2="1120" y2="380" id="121_221" style="stroke:black;stroke-width:1"/>
	<line x1="1480" y1="260" x2="1390" y2="380" id="131_231" style="stroke:black;stroke-width:1"/>
	<line x1="2200" y1="140" x2="2110" y2="260" id="141_241" style="stroke:black;stroke-width:1"/>
	<line x1="1660" y1="260" x2="1570" y2="380" id="151_251" style="stroke:black;stroke-width:1"/>
	<g>
		<rect width="80" height="40" x="180" y="240" id="1 " rx="10" ry="10" fill="orange"/>
		<text id="Text1 "x="217" y="263" fill="black" font-size="12">1 </text>
	</g>
	<g>
		<rect width="80" height="40" x="720" y="120" id="2 " rx="10" ry="10" fill="orange"/>
		<text id="Text2 "x="757" y="143" fill="black" font-size="12">2 </text>
	</g>
	<g>
		<rect width="80" height="40" x="810" y="240" id="3 " rx="10" ry="10" fill="orange"/>
		<text id="Text3 "x="847" y="263" fill="black" font-size="12">3 </text>
	</g>
	<g>
		<rect width="80" height="40" x="90" y="360" id="4 " rx="10" ry="10" fill="orange"/>
		<text id="Text4 "x="127" y="383" fill="black" font-size="12">4 </text>
	</g>
	<g>
		<rect width="80" height="40" x="450" y="360" id="5 " rx="10" ry="10" fill="orange"/>
		<text id="Text5 "x="487" y="383" fill="black" font-size="12">5 </text>
	</g>
	<g>
		<rect width="80" height="40" x="1260" y="120" id="6 " rx="10" ry="10" fill="orange"/>
		<text id="Text6 "x="1297" y="143" fill="black" font-size="12">6 </text>
	</g>
	<g>
		<rect width="80" height="40" x="900" y="0" id="7 " rx="10" ry="10" fill="orange"/>
		<text id="Text7 "x="937" y="23" fill="black" font-size="12">7 </text>
	</g>
	<g>
		<rect width="80" height="40" x="1710" y="120" id="8 " rx="10" ry="10" fill="orange"/>
		<text id="Text8 "x="1747" y="143" fill="black" font-size="12">8 </text>
	</g>
	<g>
		<rect width="80" height="40" x="0" y="480" id="9 " rx="10" ry="10" fill="orange"/>
		<text id="Text9 "x="37" y="503" fill="black" font-size="12">9 </text>
	</g>
	<g>
		<rect width="80" height="40" x="360" y="480" id="10 " rx="10" ry="10" fill="orange"/>
		<text id="Text10 "x="394" y="503" fill="black" font-size="12">10 </text>
	</g>
	<g>
		<rect width="80" height="40" x="630" y="480" id="11 " rx="10" ry="10" fill="orange"/>
		<text id="Text11 "x="664" y="503" fill="black" font-size="12">11 </text>
	</g>
	<g>
		<rect width="80" height="40" x="1170" y="240" id="12 " rx="10" ry="10" fill="orange"/>
		<text id="Text12 "x="1204" y="263" fill="black" font-size="12">12 </text>
	</g>
	<g>
		<rect width="80" height="40" x="1440" y="240" id="13 " rx="10" ry="10" fill="orange"/>
		<text id="Text13 "x="1474" y="263" fill="black" font-size="12">13 </text>
	</g>
	<g>
		<rect width="80" height="40" x="2160" y="120" id="14 " rx="10" ry="10" fill="orange"/>
		<text id="Text14 "x="2194" y="143" fill="black" font-size="12">14 </text>
	</g>
	<g>
		<rect width="80" height="40" x="1620" y="240" id="15 " rx="10" ry="10" fill="orange"/>
		<text id="Text15 "x="1654" y="263" fill="black" font-size="12">15 </text>
	</g>
	<g>
		<rect width="80" height="40" x="1980" y="240" id="16 " rx="10" ry="10" fill="orange"/>
		<text id="Text16 "x="2014" y="263" fill="black" font-size="12">16 </text>
	</g>
	<g>
		<rect width="80" height="40" x="1890" y="360" id="17 " rx="10" ry="10" fill="orange"/>
		<text id="Text17 "x="1924" y="383" fill="black" font-size="12">17 </text>
	</g>
	<g>
		<rect width="80" height="40" x="1800" y="480" id="18 " rx="10" ry="10" fill="orange"/>
		<text id="Text18 "x="1834" y="503" fill="black" font-size="12">18 </text>
	</g>
	<g>
		<rect width="80" height="40" x="270" y="600" id="19 " rx="10" ry="10" fill="orange"/>
		<text id="Text19 "x="304" y="623" fill="black" font-size="12">19 </text>
	</g>
	<g>
		<rect width="80" height="40" x="540" y="600" id="20 " rx="10" ry="10" fill="orange"/>
		<text id="Text20 "x="574" y="623" fill="black" font-size="12">20 </text>
	</g>
	<g>
		<rect width="80" height="40" x="990" y="480" id="21 " rx="10" ry="10" fill="orange"/>
		<text id="Text21 "x="1024" y="503" fill="black" font-size="12">21 </text>
	</g>
	<g>
		<rect width="80" height="40" x="1080" y="360" id="22 " rx="10" ry="10" fill="orange"/>
		<text id="Text22 "x="1114" y="383" fill="black" font-size="12">22 </text>
	</g>
	<g>
		<rect width="80" height="40" x="1350" y="360" id="23 " rx="10" ry="10" fill="orange"/>
		<text id="Text23 "x="1384" y="383" fill="black" font-size="12">23 </text>
	</g>
	<g>
		<rect width="80" height="40" x="2070" y="240" id="24 " rx="10" ry="10" fill="orange"/>
		<text id="Text24 "x="2104" y="263" fill="black" font-size="12">24 </text>
	</g>
	<g>
		<rect width="80" height="40" x="1530" y="360" id="25 " rx="10" ry="10" fill="orange"/>
		<text id="Text25 "x="1564" y="383" fill="black" font-size="12">25 </text>
	</g>
	</svg>

	<input type="button" value="Start" onclick="startAnimation()"/>
	<input type="button" value="Step" onclick="stepAnimation()" />
	<input type="button" value="Stop" onclick="stopAnimation()" />
	<h1>2 GRAPH:</h1>
	<svg width="5000" height="3000">

	<line x1="960" y1="480" x2="946" y2="594" id="1_2" style="stroke:black;stroke-width:1"/>
	<line x1="960" y1="480" x2="903" y2="702" id="1_3" style="stroke:black;stroke-width:1"/>
	<line x1="960" y1="480" x2="835" y2="795" id="1_4" style="stroke:black;stroke-width:1"/>
	<line x1="960" y1="480" x2="746" y2="868" id="1_5" style="stroke:black;stroke-width:1"/>
	<line x1="946" y1="594" x2="903" y2="702" id="2_3" style="stroke:black;stroke-width:1"/>
	<line x1="946" y1="594" x2="642" y2="917" id="2_6" style="stroke:black;stroke-width:1"/>
	<line x1="946" y1="594" x2="529" y2="939" id="2_7" style="stroke:black;stroke-width:1"/>
	<line x1="903" y1="702" x2="835" y2="795" id="3_4" style="stroke:black;stroke-width:1"/>
	<line x1="903" y1="702" x2="414" y2="932" id="3_8" style="stroke:black;stroke-width:1"/>
	<line x1="835" y1="795" x2="746" y2="868" id="4_5" style="stroke:black;stroke-width:1"/>
	<line x1="835" y1="795" x2="304" y2="896" id="4_9" style="stroke:black;stroke-width:1"/>
	<line x1="746" y1="868" x2="207" y2="834" id="5_10" style="stroke:black;stroke-width:1"/>
	<line x1="746" y1="868" x2="128" y2="750" id="5_11" style="stroke:black;stroke-width:1"/>
	<line x1="642" y1="917" x2="529" y2="939" id="6_7" style="stroke:black;stroke-width:1"/>
	<line x1="642" y1="917" x2="72" y2="649" id="6_12" style="stroke:black;stroke-width:1"/>
	<line x1="642" y1="917" x2="44" y2="538" id="6_13" style="stroke:black;stroke-width:1"/>
	<line x1="529" y1="939" x2="414" y2="932" id="7_8" style="stroke:black;stroke-width:1"/>
	<line x1="529" y1="939" x2="44" y2="422" id="7_14" style="stroke:black;stroke-width:1"/>
	<line x1="414" y1="932" x2="72" y2="311" id="8_15" style="stroke:black;stroke-width:1"/>
	<line x1="414" y1="932" x2="128" y2="210" id="8_16" style="stroke:black;stroke-width:1"/>
	<line x1="304" y1="896" x2="207" y2="834" id="9_10" style="stroke:black;stroke-width:1"/>
	<line x1="304" y1="896" x2="207" y2="126" id="9_17" style="stroke:black;stroke-width:1"/>
	<line x1="304" y1="896" x2="304" y2="64" id="9_18" style="stroke:black;stroke-width:1"/>
	<line x1="207" y1="834" x2="128" y2="750" id="10_11" style="stroke:black;stroke-width:1"/>
	<line x1="207" y1="834" x2="414" y2="28" id="10_19" style="stroke:black;stroke-width:1"/>
	<line x1="128" y1="750" x2="529" y2="21" id="11_20" style="stroke:black;stroke-width:1"/>
	<line x1="128" y1="750" x2="642" y2="43" id="11_21" style="stroke:black;stroke-width:1"/>
	<line x1="72" y1="649" x2="44" y2="538" id="12_13" style="stroke:black;stroke-width:1"/>
	<line x1="72" y1="649" x2="746" y2="92" id="12_22" style="stroke:black;stroke-width:1"/>
	<line x1="44" y1="538" x2="835" y2="165" id="13_23" style="stroke:black;stroke-width:1"/>
	<line x1="44" y1="422" x2="72" y2="311" id="14_15" style="stroke:black;stroke-width:1"/>
	<line x1="44" y1="422" x2="903" y2="258" id="14_24" style="stroke:black;stroke-width:1"/>
	<line x1="72" y1="311" x2="946" y2="366" id="15_25" style="stroke:black;stroke-width:1"/>
	<line x1="128" y1="210" x2="207" y2="126" id="16_17" style="stroke:black;stroke-width:1"/>
	<line x1="207" y1="126" x2="304" y2="64" id="17_18" style="stroke:black;stroke-width:1"/>
	<line x1="304" y1="64" x2="414" y2="28" id="18_19" style="stroke:black;stroke-width:1"/>
	<line x1="414" y1="28" x2="529" y2="21" id="19_20" style="stroke:black;stroke-width:1"/>
	<line x1="529" y1="21" x2="642" y2="43" id="20_21" style="stroke:black;stroke-width:1"/>
	<line x1="642" y1="43" x2="746" y2="92" id="21_22" style="stroke:black;stroke-width:1"/>
	<line x1="746" y1="92" x2="835" y2="165" id="22_23" style="stroke:black;stroke-width:1"/>
	<line x1="835" y1="165" x2="903" y2="258" id="23_24" style="stroke:black;stroke-width:1"/>
	<line x1="903" y1="258" x2="946" y2="366" id="24_25" style="stroke:black;stroke-width:1"/>
	<g>
		<rect width="80" height="40" x="920" y="460" id="1" rx="10" ry="10" fill="orange"/>
		<text id="Text1"x="960" y="483" fill="black" font-size="12">1</text>
	</g>
	<g>
		<rect width="80" height="40" x="906" y="574" id="2" rx="10" ry="10" fill="orange"/>
		<text id="Text2"x="946" y="597" fill="black" font-size="12">2</text>
	</g>
	<g>
		<rect width="80" height="40" x="863" y="682" id="3" rx="10" ry="10" fill="orange"/>
		<text id="Text3"x="903" y="705" fill="black" font-size="12">3</text>
	</g>
	<g>
		<rect width="80" height="40" x="795" y="775" id="4" rx="10" ry="10" fill="orange"/>
		<text id="Text4"x="835" y="798" fill="black" font-size="12">4</text>
	</g>
	<g>
		<rect width="80" height="40" x="706" y="848" id="5" rx="10" ry="10" fill="orange"/>
		<text id="Text5"x="746" y="871" fill="black" font-size="12">5</text>
	</g>
	<g>
		<rect width="80" height="40" x="602" y="897" id="6" rx="10" ry="10" fill="orange"/>
		<text id="Text6"x="642" y="920" fill="black" font-size="12">6</text>
	</g>
	<g>
		<rect width="80" height="40" x="489" y="919" id="7" rx="10" ry="10" fill="orange"/>
		<text id="Text7"x="529" y="942" fill="black" font-size="12">7</text>
	</g>
	<g>
		<rect width="80" height="40" x="374" y="912" id="8" rx="10" ry="10" fill="orange"/>
		<text id="Text8"x="414" y="935" fill="black" font-size="12">8</text>
	</g>
	<g>
		<rect width="80" height="40" x="264" y="876" id="9" rx="10" ry="10" fill="orange"/>
		<text id="Text9"x="304" y="899" fill="black" font-size="12">9</text>
	</g>
	<g>
		<rect width="80" height="40" x="167" y="814" id="10" rx="10" ry="10" fill="orange"/>
		<text id="Text10"x="204" y="837" fill="black" font-size="12">10</text>
	</g>
	<g>
		<rect width="80" height="40" x="88" y="730" id="11" rx="10" ry="10" fill="orange"/>
		<text id="Text11"x="125" y="753" fill="black" font-size="12">11</text>
	</g>
	<g>
		<rect width="80" height="40" x="32" y="629" id="12" rx="10" ry="10" fill="orange"/>
		<text id="Text12"x="69" y="652" fill="black" font-size="12">12</text>
	</g>
	<g>
		<rect width="80" height="40" x="4" y="518" id="13" rx="10" ry="10" fill="orange"/>
		<text id="Text13"x="41" y="541" fill="black" font-size="12">13</text>
	</g>
	<g>
		<rect width="80" height="40" x="4" y="402" id="14" rx="10" ry="10" fill="orange"/>
		<text id="Text14"x="41" y="425" fill="black" font-size="12">14</text>
	</g>
	<g>
		<rect width="80" height="40" x="32" y="291" id="15" rx="10" ry="10" fill="orange"/>
		<text id="Text15"x="69" y="314" fill="black" font-size="12">15</text>
	</g>
	<g>
		<rect width="80" height="40" x="88" y="190" id="16" rx="10" ry="10" fill="orange"/>
		<text id="Text16"x="125" y="213" fill="black" font-size="12">16</text>
	</g>
	<g>
		<rect width="80" height="40" x="167" y="106" id="17" rx="10" ry="10" fill="orange"/>
		<text id="Text17"x="204" y="129" fill="black" font-size="12">17</text>
	</g>
	<g>
		<rect width="80" height="40" x="264" y="44" id="18" rx="10" ry="10" fill="orange"/>
		<text id="Text18"x="301" y="67" fill="black" font-size="12">18</text>
	</g>
	<g>
		<rect width="80" height="40" x="374" y="8" id="19" rx="10" ry="10" fill="orange"/>
		<text id="Text19"x="411" y="31" fill="black" font-size="12">19</text>
	</g>
	<g>
		<rect width="80" height="40" x="489" y="1" id="20" rx="10" ry="10" fill="orange"/>
		<text id="Text20"x="526" y="24" fill="black" font-size="12">20</text>
	</g>
	<g>
		<rect width="80" height="40" x="602" y="23" id="21" rx="10" ry="10" fill="orange"/>
		<text id="Text21"x="639" y="46" fill="black" font-size="12">21</text>
	</g>
	<g>
		<rect width="80" height="40" x="706" y="72" id="22" rx="10" ry="10" fill="orange"/>
		<text id="Text22"x="743" y="95" fill="black" font-size="12">22</text>
	</g>
	<g>
		<rect width="80" height="40" x="795" y="145" id="23" rx="10" ry="10" fill="orange"/>
		<text id="Text23"x="832" y="168" fill="black" font-size="12">23</text>
	</g>
	<g>
		<rect width="80" height="40" x="863" y="238" id="24" rx="10" ry="10" fill="orange"/>
		<text id="Text24"x="900" y="261" fill="black" font-size="12">24</text>
	</g>
	<g>
		<rect width="80" height="40" x="906" y="346" id="25" rx="10" ry="10" fill="orange"/>
		<text id="Text25"x="943" y="369" fill="black" font-size="12">25</text>
	</g>
	</svg>

<script>
	const lineNameIds = [ "1_2", "1_3", "1_4", "1_5", "2_3", "2_6", "2_7", "3_4", "3_8", "4_5", "4_9", "5_10", "5_11", "6_7", "6_12", "6_13", "7_8", "7_14", "8_15", "8_16", "9_10", "9_17", "9_18", "10_11", "10_19", "11_20", "11_21", "12_13", "12_22", "13_23", "14_15", "14_24", "15_25", "16_17", "17_18", "18_19", "19_20", "20_21", "21_22", "22_23", "23_24", "24_25"]
	const pointNameIds = [ "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25"]
	const textNames = [ "Text1", "Text2", "Text3", "Text4", "Text5", "Text6", "Text7", "Text8", "Text9", "Text10", "Text11", "Text12", "Text13", "Text14", "Text15", "Text16", "Text17", "Text18", "Text19", "Text20", "Text21", "Text22", "Text23", "Text24", "Text25"]
	
	    lineObjs = [];
		initialObjPosX = [];
		initialObjSpeedX = [];
		TextObjs = [];
		initialObjSpeedY = [];
		
		lineNameIds.forEach((n) => lineObjs.push(document.getElementById(n)));
		pointNameIds.forEach((n) => initialObjPosX.push(document.getElementById(n)));
		textNames.forEach((n) => TextObjs.push(document.getElementById(n)));
		
		pointNameIds.forEach((n) => initialObjSpeedX.push(0.0));
		pointNameIds.forEach((n) => initialObjSpeedY.push(0.0));
		
		
		const m = 10;
		const mu = 10;
		const k_spring = 1.3*mu;
	    const k_repulse = -3.3*mu;
		const dt = 0.001;
		const restDistance = 300;
		
		const atan3 = (x, y) => {
			if (x >= 0){
				return Math.atan(y/x);
			} else if (x * y <= 0){
				return Math.atan(y/x) + Math.PI;
			} else if (x < 0){
				return Math.atan(y/x) - Math.PI;
			}
		}
	
		const calculateSpringForce = (name, fromX, toSpringXs, fromY, toSpringYs, isXcoordinate) => {
			displacementForces = [];
		    toSpringXs.forEach((toX, i) => {
				displacement = 0;
				toY = toSpringYs[i];
	
				offsetY = toY-fromY;
				offsetX = toX-fromX;
	
				radians = Math.atan2(offsetY, offsetX);
	
				actualRestDistance = restDistance * (isXcoordinate ? Math.cos(radians) : Math.sin(radians));
				
				displacement = (fromX  - toX + actualRestDistance)
	
				console.log(name + " Offset: (" + Math.round(offsetX) + ", " + Math.round(offsetY) , ") " + " Dis: " + Math.round(actualRestDistance) + " Deg: "+ radians*180/Math.PI + " Displacement" + displacement)
				displacementForces.push(displacement);
		    })
			
			return displacementForces.reduce((partialSumForce, otherForce) => partialSumForce + otherForce, 0)*-1;
		}
	
		const calculateAcceleration = (fromX, speedX, toXs, isXcoordinate, fromY, toSpringY, repXs, repY) => {
		    
	        repulsionForces = [];
		    console.log("From: " + Math.abs(fromX), " To's: " +toXs)
			displacement = 0;
			repulsionForce = 0;
			
			repulsion = 0;
	        // //Repulsion
	        repXs.forEach((repX, i)=>{
	            repulsion = 0;
				offsetY = repY[i]-fromY;
				offsetX = repX-fromX;
				r = Math.sqrt(offsetX**2 +  offsetY**2)
				radians = Math.atan2(offsetY, offsetX);
	            
	            
	            if (offsetX === 0){
	            	repulsion = 1;
	            } else {
	            	repulsion = k_repulse*-1*offsetX / (r)
	
	            }
	
	            repulsionForces.push(repulsion);
	        })
	
	
		    
		    springForce =  calculateSpringForce("Node: ", fromX, toXs, fromY, toSpringY, isXcoordinate);
	        repulsionForce = repulsionForces.reduce((partialSumForce, otherForce) => partialSumForce + otherForce, 0); 
		    console.log("Spring Force: " + springForce)
			console.log("Acceleation: " + ((k_spring*springForce) + k_repulse*repulsionForce + -1*mu*speedX)/m)
			return ((k_spring*springForce) + k_repulse*repulsionForce + mu*2*(Math.random()*2 - 1) + -1*mu*speedX)/m;
		}
		
		
		var oldPositionsX = [];
		var oldPositionsY = [];
		var oldVelocitiesX = [...initialObjSpeedX];
		var newVelocitiesX = [...initialObjSpeedX];
		
		var oldVelocitiesY = [...initialObjSpeedY];
		var newVelocitiesY = [...initialObjSpeedY];
		var springPointsX = [];
	    var springPointsY = [];
		var newAccelerationX, newAccelerationY;
		var newPosX, newPosY;
		var newSpeedX, newSpeedY;
		var initObjPosX = []
		var initObjPosY = []
		initialObjPosX.forEach((pointObj, i) =>{
		    oldPositionsX.push((pointObj.getAttribute("x")));
			initObjPosX.push(pointObj.getAttribute("x"));
		})
		initialObjPosX.forEach((pointObj, i) =>{
		    oldPositionsY.push((pointObj.getAttribute("y")));
			initObjPosY.push(pointObj.getAttribute("y"));
		})
		var newPositionsX = [...oldPositionsX];
		var newPositionsY = [...oldPositionsY];
	
		let otherPointindex, connections, conntected;
		
		const restPoint = 300; 
		function animate() {
			console.clear()
		    springPointsX = [];
		    springPointsY = [];
	        
		    oldVelocitiesX = [];
		    oldPositionsX = [];
		    oldVelocitiesY = [];
		    oldPositionsY = [];
	
		    oldVelocitiesX = [...newVelocitiesX];
		    oldPositionsX = [...newPositionsX];
		    oldVelocitiesY = [...newVelocitiesY];
		    oldPositionsY = [...newPositionsY];
		
		    oldPositionsX.forEach((oldPosX, i) =>{
				oldPosY = oldPositionsY[i];
		        parent = pointNameIds[i];
		        springPointsX = [restPoint];
				springPointsY = [restPoint];
		        conntected = []
		        
		        lineNameIds.forEach((name) => {
		            connections = []
		            connections = name.split("_");
		            
		            if (connections[0] === parent) {
		                otherPointindex = pointNameIds.findIndex((randomName)=> (randomName === connections[1]));
		                conntected.push(pointNameIds[otherPointindex]);
		                springPointsX.push(oldPositionsX[otherPointindex]);
						springPointsY.push(oldPositionsY[otherPointindex]);
		            } else if (connections[1] === parent) {
		                otherPointindex = pointNameIds.findIndex((randomName)=> (randomName === connections[0]));
		                conntected.push(pointNameIds[otherPointindex]);
		                springPointsX.push(oldPositionsX[otherPointindex]);
						springPointsY.push(oldPositionsY[otherPointindex]);
		            }
		        })
	            
				repX = [restPoint,...oldPositionsX];
				repY = [restPoint,...oldPositionsY];
	
		        newAccelerationX = calculateAcceleration(+oldPosX, +oldVelocitiesX[i], springPointsX, true, +oldPosY, springPointsY, repX, repY);
		        newPosX = +oldPosX + (+oldVelocitiesX[i] * dt);
		        newSpeedX = (+oldVelocitiesX[i] + newAccelerationX * dt);
		        newSpeedX = Math.abs(newSpeedX) > 0.00001 ? newSpeedX : 0;
	
				newAccelerationY = calculateAcceleration(+oldPosY, +oldVelocitiesY[i], springPointsY, false, +oldPosX, springPointsX,  repX, repY);
		        newPosY = +oldPosY + (+oldVelocitiesY[i] * dt);
		        newSpeedY = (+oldVelocitiesY[i] + newAccelerationY * dt);
		        newSpeedY = Math.abs(newSpeedY) > 0.00001 ? newSpeedY : 0;
		
		
		        console.log(parent,"AccX:", newAccelerationX, newAccelerationY);
		        console.log(parent,"VelX:", oldVelocitiesX[i], newSpeedX, oldVelocitiesY[i], newSpeedY);
		        console.log(parent,"PosX:", oldPosX, newPosX, oldPosY, newPosY);
		        newPositionsX[i] = (newPosX);
		        newVelocitiesX[i] = newSpeedX;
				newPositionsY[i] = (newPosY);
		        newVelocitiesY[i] = newSpeedY;
		    })
		    
		
		    initialObjPosX.forEach((pointObj, i) => {
		        pointObj.setAttribute("x", Math.abs(newPositionsX[i]));
				pointObj.setAttribute("y", Math.abs(newPositionsY[i]));
		    })
		
		    TextObjs.forEach((textObj, i) => {
		        textObj.setAttribute("x", Math.abs(newPositionsX[i])+20);
		        textObj.setAttribute("y", Math.abs(newPositionsY[i])+40);
		    })
		
		    lineNameIds.forEach((name, i) => {
		        connections = name.split("_");
		        lineObjs[i].setAttribute("x1", Math.abs(newPositionsX[pointNameIds.findIndex((name)=> name==connections[0])])+40);
		        lineObjs[i].setAttribute("x2", Math.abs(newPositionsX[pointNameIds.findIndex((name)=> name==connections[1])])+40 );
		        lineObjs[i].setAttribute("y1", Math.abs(newPositionsY[pointNameIds.findIndex((name)=> name==connections[0])])+30);
		        lineObjs[i].setAttribute("y2", Math.abs(newPositionsY[pointNameIds.findIndex((name)=> name==connections[1])])+30 );
		    })
		    
		
		};
		
		var t = null;
		
		function startAnimation() {
		    if(t == null) {
		      t = setInterval(animate, 1);
		    }
		  }
		  
		function stepAnimation(){
		    animate();
		}
		
		function stopAnimation() {
		    if (t != null) {
		        clearInterval(t);
		        t = null;
				
		    }
		}
	
	(null)</script>
	</body>
</html>
